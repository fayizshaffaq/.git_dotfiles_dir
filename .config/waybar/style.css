/*
 * ~/.config/waybar/style.css
 *
 * A robust, highly-customizable, and 100% GTK-compliant theme for a VERTICAL Waybar.
 * This version is modified to dynamically use colors from Pywal.
 *
 * Author: Gemini (modified for Pywal)
 * Version: 3.7 (Final)
 */

/*
 * ===================================================================
 * I. USER CONFIGURATION - PERSONALIZE YOUR WAYBAR HERE
 * ===================================================================
 */

/* --- PYWAL COLOR IMPORT --- */
/* This now points to the Waybar-compatible file automatically generated by Pywal.
   This path is already set for your user 'dusk'. */
@import url("../../.cache/wal/colors-waybar.css");

/* * I-A. SIZING CONFIGURATION (EDIT BAR WIDTH FOR VERTICAL BAR)
 * -------------------------------------------------------------------
 */

* {
    /* VARIABLE 1: Font Size. Affects the natural width of text content. */
    font-size: 10px;
}

#workspaces button,
#workspaces, #clock, #battery, #pulseaudio, #network, #cpu, #memory,
#backlight, #tray,#custom-ollama, #temperature, #custom-notification, #custom-inhibit-suspend, #custom-power,
#custom-network-unit, #custom-network-upload, #custom-network-download {
    /* VARIABLE 2: Module Horizontal Padding. This is the primary control for the bar's width. */
    padding-left: 0px;
    padding-right: 0px;
}


/* * I-B. COLOR PALETTE (DYNAMICALLY SET BY PYWAL)
 * -------------------------------------------------------------------
 */
@define-color bar_bg @background;          /* Bar background from Pywal */
@define-color text_primary @foreground;      /* Primary text from Pywal */
@define-color text_secondary @color4;        /* Secondary/accent text (Pywal's blue/accent) */
@define-color text_active @background;       /* Text on an active/selected element */
@define-color bg_hover alpha(@foreground, 0.2); /* Background on hover (semi-transparent) */
@define-color bg_active @color4;           /* Background for active/selected elements */
@define-color bg_module alpha(@foreground, 0.1); /* Background for contained modules (e.g., workspaces) */
@define-color border_color alpha(@foreground, 0.2); /* Border for tooltips */

/* --- State Colors --- */
@define-color color_good @color2;            /* Green - Success, OK, Charging */
@define-color color_warning @color3;        /* Yellow - Warning, Muted */
@define-color color_critical @color1;        /* Red - Critical, Disconnected, Urgent */
@define-color color_info @color4;            /* Blue - Info, Paused */
@define-color color_purple @color5;          /* Purple - Memory module */

/* --- Customizable Network Colors --- */
/* These now inherit the state colors from above */
@define-color network_kb_color @color_good;
@define-color network_mb_color @color_critical;


/*
 * ===================================================================
 * II. GLOBAL STYLES & LAYOUT (Core Structure)
 * ===================================================================
 */

* {
    /* The font-size is now controlled in the SIZING CONFIGURATION section above */
    font-family: "JetBrainsMono Nerd Font", "Noto Sans", sans-serif;
    border: none;
    border-radius: 0;
    min-height: 0;
    animation: none; /* Reset all animations by default */
    transition-property: background-color, color;
    transition-duration: 0.0s;
    transition-timing-function: ease-in-out;
}

window#waybar {
    background: @bar_bg;
    color: @text_primary;
    margin: 1px;
    border-radius: 4px;
    padding: 5px 0; /* Vertical padding for the top/bottom of the bar */
}

window#waybar.hidden {
    opacity: 0.5;
}

/* --- Tooltip Style --- */
tooltip {
    background: @bar_bg;
    color: @text_primary;
    border: 1px solid @border_color;
    border-radius: 6px;
}

tooltip label {
    padding: 8px;
    color: @text_primary;
}

/*
 * ===================================================================
 * III. MODULE-SPECIFIC STYLES
 * ===================================================================
 */

/* --- Default Module Style --- */
#workspaces,
#clock,
#battery,
#pulseaudio,
#network,
#cpu,
#temperature,
#memory,
#backlight,
#tray,
#custom-notification,
#custom-power,
#custom-ollama,
#custom-inhibit-suspend,
#custom-network-unit,
#custom-network-upload,
#custom-network-download {
    /* Horizontal padding is now controlled in the SIZING CONFIGURATION section */
    margin: 4px 3px; /* 6px vertical, 3px horizontal margin between modules */
    padding-top: 0;
    padding-bottom: 0;
    border-radius: 6px;
    background-color: transparent;
}

/* --- Custom Override for Network Module Spacing --- */
#custom-network-unit,
#custom-network-upload,
#custom-network-download {
    margin-top: 0px;
    margin-bottom: 0px;
}


/* --- Default Module Hover Style --- */
#clock:hover,
#battery:hover,
#pulseaudio:hover,
#network:hover,
#cpu:hover,
#memory:hover,
#backlight:hover,
#custom-ollama:hover,
#custom-notification:hover,
#custom-power:hover,
#temperature:hover,
#custom-inhibit-suspend:hover,
#custom-network-unit:hover,
#custom-network-upload:hover,
#custom-network-download:hover {
    background-color: @bg_hover;
}

/* --- Workspaces --- */
#workspaces {
    background-color: @bg_module;
    padding-top: 0;
    padding-bottom: 0;
}

#workspaces button {
    /* Horizontal padding is now controlled in the SIZING CONFIGURATION section */
    margin: 4px 3px;
    padding-top: 0;
    padding-bottom: 0;
    color: @text_secondary;
    background-color: transparent;
    border-radius: 6px;
}

#workspaces button:hover {
    background-color: @bg_hover;
}

#workspaces button.focused,
#workspaces button.active {
    background-color: @bg_active;
    color: @text_active;
}

#workspaces button.urgent {
    background-color: @color_critical;
    color: @text_active;
    animation: blink-urgent 1.5s steps(1, end) infinite;
}

/* --- Clock --- */
#clock {
    font-weight: bold;
    color: @text_secondary;
    margin-top: 0px;
    margin-bottom: 0px;
}

/* --- Ollama --- */
#custom-ollama {
    color: @color_purple;
    margin-top: 3px;
    margin-bottom: 0;
}

/* --- Battery --- */
#battery {
    color: @color_good;
}
#battery.warning {
    color: @color_warning;
}
#battery.critical {
    color: @color_critical;
    animation: blink-critical 1s steps(1, end) infinite;
}
#battery.charging, #battery.plugged {
    color: @color_good;
}

/* --- Pulseaudio --- */
#pulseaudio { color: @color_info; }
#pulseaudio.muted { color: @color_warning; }

/* --- Network --- */
#network { color: @color_good; }
#network.disconnected { color: @color_critical; }

/* --- Temperature --- */
#temperature { color: @color_info; }
#temperature.critical { color: @color_critical; }


/* --- CPU / Memory / Backlight --- */
#cpu { color: @color_info; }
#memory { color: @color_purple; }
#memory.critical { color: @color_critical; }
#backlight { color: @color_warning; }

/* --- System Tray --- */
#tray {
}

/* --- Inhibit Suspend --- */
#custom-inhibit-suspend.enabled {
    color:  @color_good; 
}

#custom-inhibit-suspend.disabled {
    color: @color_critical; /* Red, indicating suspend is off */
}
/* --- Custom Modules --- */
#custom-power {
    color: @color_good;
    margin-top: 0px;
}

#custom-notification.dnd-none { color: @color_good; }
#custom-notification.dnd-notification,
#custom-notification.dnd-all { color: @color_warning; }
#custom-notification.notification {
    color: @color_info;
    animation: blink-info 1s steps(1, end) infinite;
    margin-top: 2px;
    margin-bottom: 0px;


}

/* --- Custom Network Speed Indicator --- */
/* Default color: set by Pywal's "good" color */
#custom-network-unit,
#custom-network-upload,
#custom-network-download,
#custom-network-unit.network-kb,
#custom-network-upload.network-kb,
#custom-network-download.network-kb {
    color: @network_kb_color;
}

/* Override color: set by Pywal's "critical" color */
#custom-network-unit.network-mb,
#custom-network-upload.network-mb,
#custom-network-download.network-mb {
    color: @network_mb_color;
}


/*
 * ===================================================================
 * IV. ANIMATIONS
 * ===================================================================
 */

@keyframes blink-critical {
    to { color: @text_primary; }
}

@keyframes blink-urgent {
    to {
        background-color: @bg_active;
        color: @text_active;
    }
}

@keyframes blink-info {
    to {
        color: @color_info;
        opacity: 0.5;
    }
}
