#This file can also be edited easily with a GUI by right clicking the battery/power module/icon on waybar. 
general {
    # LOCK COMMAND
    # Run hyprlock. 'pidof' prevents launching multiple instances.
    lock_cmd = pidof hyprlock || hyprlock

    # BEFORE SLEEP
    # Ensure the session locks before the computer actually goes to sleep.
    before_sleep_cmd = loginctl lock-session

    # AFTER SLEEP
    # Turn the display back on immediately upon waking to ensure the login prompt is visible.
    after_sleep_cmd = hyprctl dispatch dpms on
}

# ==============================================================================
# 1. DIM KEYBOARD BACKLIGHT (Asus TUF F15 Specific)
# ==============================================================================
# Action: Turn off keyboard backlight completely to save battery.
# Note: Check if your device is named 'asus::kbd_backlight' via 'brightnessctl --list'
listener {
    timeout = 140
    on-timeout = brightnessctl -sd asus::kbd_backlight set 0
    on-resume = brightnessctl -rd asus::kbd_backlight
}

# ==============================================================================
# 2. DIM SCREEN BRIGHTNESS
# ==============================================================================
# Action: Dim screen to minimum (1) but keep it visible as a warning.
listener {
    timeout = 120
    on-timeout = brightnessctl -s set 1
    on-resume = brightnessctl -r
}

# ==============================================================================
# 3. LOCK SESSION
# ==============================================================================
# Action: Lock the screen. 
listener {
    timeout = 180
    on-timeout = loginctl lock-session
}

# ==============================================================================
# 4. SCREEN OFF (DPMS)
# ==============================================================================
# Action: Turn off the monitor power completely.
# This is critical for saving battery if the system doesn't fully suspend.
listener {
    timeout = 200
    on-timeout = hyprctl dispatch dpms off
    on-resume = hyprctl dispatch dpms on
}

# ==============================================================================
# 5. SUSPEND SYSTEM
# ==============================================================================
# Action: Suspend the PC.
# Note: Hypridle automatically detects media playing (Youtube, etc.) and 
# will NOT suspend if audio is active, thanks to standard dbus inhibition.
listener {
    timeout = 400
    on-timeout = systemctl suspend
}
