
# 🐋 Docker: The Essential Command Reference

This guide serves as both a step-by-step introduction and a comprehensive reference for the most essential Docker commands. It is designed to be clear, accurate, and easy to navigate.

> [!NOTE] What is Docker?
> As detailed in [[Understanding Docker]], Docker packages software into standard units called containers. A container bundles up everything the software needs to run—code, runtime, libraries, and settings—ensuring it works identically everywhere. This solves the classic "it works on my machine" problem.

---

## 1. The Core Workflow: A Practical Introduction

For anyone starting out, the Docker workflow typically follows these three steps.

### Step 1: Get a Blueprint (Image)
First, you need a blueprint, called an **Image**. You can either build one from a `Dockerfile` or, more commonly, download a pre-made one from a registry like Docker Hub.

Let's pull the official NGINX web server image.

```bash
# Downloads the 'nginx' image with the 'latest' tag
docker pull nginx
```

### Step 2: Create an Instance (Container)
Next, you run the image to create a **Container**, which is a live, running instance of that image.

```bash
# Runs a new container from the 'nginx' image
# --name: Gives it a memorable name, 'my-web-server'
# -d: Runs it in the background (detached)
# -p: Maps port 8080 on your computer to port 80 inside the container
docker run --name my-web-server -d -p 8080:80 nginx
```

> [!TIP] Check Your Work!
> Your NGINX server is now running! Open a web browser and navigate to `http://localhost:8080`. You should see the NGINX welcome page.

### Step 3: Manage the Container
Now that it's running, you can manage its lifecycle.

```bash
# List all currently running containers
docker ps

# View the logs generated by your NGINX container
docker logs my-web-server

# Stop the container
docker stop my-web-server

# Start it again
docker start my-web-server

# When you're finished, stop and remove the container
docker stop my-web-server
docker rm my-web-server
```

---

## 2. 🖼️ Managing Images

Images are the read-only templates for your containers.

| Command | Description |
|---|---|
| `docker pull [image]:[tag]` | Downloads an image from a registry (e.g., Docker Hub). |
| `docker images` | Lists all images stored locally on your machine. |
| `docker rmi [image_id/name]` | Removes a specific image. You must remove all containers using the image first. |
| `docker build -t [name] .` | Builds a new image from a `Dockerfile` in the current directory. |
| `docker image inspect [image]` | Shows detailed, low-level information about an image in JSON format. |

> [!WARNING] Forcing Image Removal
> To force the removal of an image even if it's used by stopped containers, use `docker rmi -f [image_id/name]`. This can be risky, so use it with caution.

---

## 3. 📦 Managing Containers

Containers are the runnable instances of images.

| Command | Description |
|---|---|
| `docker ps` | Lists all **running** containers. |
| `docker ps -a` | Lists **all** containers, including those that have been stopped. |
| `docker start [container]` | Starts one or more stopped containers. |
| `docker stop [container]` | Gracefully stops one or more running containers. |
| `docker restart [container]` | Stops and then starts a container. A convenient shortcut. |
| `docker rm [container]` | Removes one or more **stopped** containers permanently. |
| `docker rm -f [container]` | Forcibly removes a **running** container. |

> [!NOTE] Identifying Containers
> In the commands above, `[container]` can be either the container's unique ID (e.g., `a4a6c62d42f5`) or its name (e.g., `my-web-server`).

---

## 4. 🔬 Inspecting & Interacting with Containers

These commands allow you to look inside and interact with your running containers.

| Command | Description |
|---|---|
| `docker logs [container]` | Fetches the logs from a container. Incredibly useful for debugging. |
| `docker logs -f [container]` | Follows the log output in real-time, like `tail -f`. |
| `docker exec -it [container] [cmd]` | Executes a command inside a running container. The `-it` flags make it interactive. |
| `docker inspect [container]` | Shows detailed, low-level information about a container, such as its IP address. |

> [!TIP] Getting a Shell Inside a Container
> The `docker exec` command is your gateway into a container. To open an interactive shell and explore its filesystem, use:
> ```bash
> # Opens a bash shell inside the container
> docker exec -it my-web-server bash
> ```
> If `bash` isn't available (e.g., in minimal Alpine images), try `sh`.

---

## 5. The `docker run` Command: Key Options

The `docker run` command is the most complex. Here are its most vital options, which you can combine as needed.

| Flag | Name | Description |
|---|---|---|
| `-d` | Detach | Runs the container in the background and prints the container ID. Your terminal is freed up. |
| `-it` | Interactive + TTY | Connects your terminal to the container's, allowing you to interact with it directly. |
| `-p [host]:[container]` | Publish | Maps a port on your host machine to a port inside the container. Essential for accessing services. |
| `--rm` | Remove | Automatically removes the container when it stops. Perfect for temporary tasks and keeping your system clean. |
| `--name [name]` | Name | Assigns a human-readable name to your container, making it easier to manage. |
| `-v [host]:[container]` | Volume / Bind Mount | Mounts a host file/directory into the container for persistent data or providing configuration. |
| `-e [VAR=value]` | Environment | Sets an environment variable inside the container. |
| `--network [net]` | Network | Connects a container to a specific network (e.g., `host`, `bridge`). |

---

## 6. 🎶 Orchestration: Docker Compose

For applications with multiple services (e.g., a website and a database), `docker-compose` is the standard tool. It uses a single `docker-compose.yml` file to manage the entire application stack.

| Command | Description |
|---|---|
| `docker-compose up` | Creates and starts all services defined in `docker-compose.yml`. Use `up -d` to run in the background. |
| `docker-compose down` | Stops and removes all containers, networks, and other resources created by `up`. |
| `docker-compose ps` | Lists the status of all services in the application stack. |
| `docker-compose logs` | Shows the aggregated, color-coded logs from all services. Use `logs -f` to follow them. |
| `docker-compose build` | Builds (or rebuilds) any services that point to a `Dockerfile` instead of a pre-built image. |
| `docker-compose exec [svc] [cmd]` | Executes a command inside a specific running service (e.g., `docker-compose exec db psql`). |

> [!IMPORTANT] The Perfect Cleanup
> The `docker-compose down` command is the perfect way to tear down an entire application environment. To also remove the named volumes associated with the stack (deleting all data!), use `docker-compose down -v`.

---

## 7. 🧹 System & Cleanup

These commands help you manage the Docker system itself and reclaim disk space.

| Command | Description |
|---|---|
| `docker system df` | Shows Docker disk space usage by images, containers, and volumes. |
| `docker system prune` | Removes all stopped containers, dangling images, and unused networks. |
| `docker system prune -a` | **Aggressively** removes all stopped containers, all unused images (not just dangling ones), and all unused networks. |
| `docker volume ls` | Lists all volumes. |
| `docker volume prune` | Removes all unused local volumes. |

> [!WARNING] Destructive Pruning
> The `docker system prune -a` command is very powerful and will permanently delete any images you are not actively using in a running container. Use with care

