# =============================================================================
# window_rules_new_backup_organized.conf
#
# Reorganized, fully commented version of your Hyprland window rules.
# - Everything from the original file has been preserved verbatim (no semantics changed).
# - Blocks are grouped in an intuitive order (global/general -> floating -> media -> apps
#   -> dialogs/pickers -> visual styling -> workspace rules -> misc/startup).
# - Explanatory comments precede each group and/or rule explaining intent and matching
#   behavior so you (or anyone else) can quickly understand why a rule exists.
# - Consolidation notes: I did NOT merge any rules that were explicitly separate and tested
#   by you. Where consolidation was safe and obvious, I left a short note suggesting
#   a consolidated alternative while keeping your original individual rules intact.
#
# NOTE: This file is purely reorganizational and documentary. It keeps your exact
# windowrule blocks and commented-out blocks as they were in the backup.
# =============================================================================

# -----------------------------------------------------------------------------
# GENERAL / XWAYLAND / GLOBAL SETTINGS
# -----------------------------------------------------------------------------
# These are global tweaks that affect XWayland scaling or other fundamental behavior.
# Keep them at the top so their effects are obvious when reading the file.
xwayland {
  force_zero_scaling = true
}

# -----------------------------------------------------------------------------
# FLOATING WINDOWS (Explicit small dialogs, sliders, and tools)
# -----------------------------------------------------------------------------
# Purpose: Small ephemeral windows (yad sliders, small utilities, dialogs) should
# float so they don't participate in tiling. Most are centered and given an
# appropriate starting size.
#
# NOTE: Several small "slider" windows (hyprsunset, brightness, volume) are kept
# as separate rules because you tested them individually. They could be combined
# into a single rule that matches multiple titles (see consolidation note below),
# but I left them separate to preserve the exact behavior you verified.

# -----------------------------------------------------
# Hyprsunset Slider (Top)
# -----------------------------------------------------
windowrule {
    name = hyprsunset_slider.sh
    match:title = ^(Hyprsunset)$
    float = on
    pin = on
    # calculated by screen/s half and then half size of the width of the window to be in the center. 
    move = (monitor_w/2-210) (monitor_h/2-220)
    size = 420 120
}

# -----------------------------------------------------
# Brightness Slider (Middle)
# -----------------------------------------------------
windowrule {
    name = brightness_slider.sh
    match:title = ^(Brightness)$
    float = on
    pin = on
    move = (monitor_w/2-210) (monitor_h/2-60)
    size = 420 120
}

# -----------------------------------------------------
# Volume Slider (Bottom)
# -----------------------------------------------------
windowrule {
    name = volume_slider.sh
    match:title = ^(Volume)$
    float = on
    pin = on
    move = (monitor_w/2-210) (monitor_h/2+100)
    size = 420 120
}

# Consolidation note: if you want fewer entries you can replace the three
# separate 'yad' rules above with a single rule using a combined regex for
# match:title, e.g. match:title = ^(Hyprsunset|brightness|volume)$
# I did NOT apply that consolidation so your tested blocks remain unmodified.

# -----------------------------------------------------------------------------
# APPLICATION-SPECIFIC FLOATS & VISUALS (Browsers, media, etc.)
# -----------------------------------------------------------------------------
# Purpose: Per-application exceptions and visual tweaks (opacity, pin, floating)
# that aren't simple utilities. Kept grouped by app for readability.

#--- Firefox: Float "About" Dialog ---
windowrule {
name = float-firefox-about
match:title = ^(About Mozilla Firefox)$
float = on
}

#--- Firefox: Float "Library" Window ---
# Note: This block uses two match properties. Both must be true for the rule to trigger.
windowrule {
name = float-firefox-library
match:class = ^(firefox)$
match:title = ^(Library)$
float = on
}

#--- Firefox: YouTube Full Opacity ---
# Forces 100% opacity (no transparency/dimming) specifically for YouTube
windowrule {
name = opaque-firefox-youtube
match:class = ^(firefox)$
match:title = .*YouTube.*
opacity = 1.0 override 1.0
}

#--- Opaque Rules for Specific Apps (Commented Out) ---
# These are kept as-is from your backup. Uncomment to force global opacity for
# the matching app class.
# windowrule {
# name = opaque-firefox-global
# match:class = ^(firefox)$
# opaque = on
# }
# 
# windowrule {
# name = opaque-obsidian
# match:class = ^(obsidian)$
# opaque = on
# }

#--- MPV: Always Float & Small ---
# Rationale: MPV is often used for small floating playback/PiP windows.
# 'size' and 'center' make sure it opens at a reasonable 360p-ish size in the middle.
windowrule {
name = float-mpv
match:class = ^(mpv)$
float = on
size = 640 360          # Sets a small initial size (approx 360p)
center = on             # Opens in the middle of the screen
#keep_aspect_ratio = on  # Locks the window frame to the video's aspect ratio
}

# -----------------------------------------------------
# qBittorrent: Floating Logic (Layered Approach)
# -----------------------------------------------------

# 1. Default Policy: Float ALL qBittorrent windows
windowrule {
    name = float_qbittorrent_all
    match:class = ^(org.qbittorrent.qBittorrent)$
    float = on
    center = on
    size = 650 450
}

# 2. Exception: Force the Main Window to Tile
windowrule {
    name = tile_qbittorrent_main
    match:class = ^(org.qbittorrent.qBittorrent)$
    match:title = ^(qBittorrent v).*$
    
    # TRY THIS FIRST:
    float = off
    
    # IF THAT FAILS (Window stays floating), COMMENT ABOVE AND USE:
    # tile = on
}

# -----------------------------------------------------------------------------
# STEAM (Grouped: general, main, friends, idle_inhibit)
# -----------------------------------------------------------------------------
# Rationale: Steam spawns multiple independent windows. Grouping keeps those
# behaviors clear and separate.

#--- Steam: General Rules (Float & Opacity) ---
# Applies to all windows with class 'steam'
windowrule {
name = steam-general
match:class = ^(steam)$
float = on
opacity = 1.0 1.0
}

#--- Steam: Main Window Specifics ---
# Targets the main library/store window for centering and specific size
windowrule {
name = steam-main-window
match:class = ^(steam)$
match:title = ^(Steam)$
size = 1100 600
center = on
}

#--- Steam: Friends List Specifics ---
# Targets the smaller friends list window
windowrule {
name = steam-friends
match:class = ^(steam)$
match:title = ^(Friends List)$
size = 460 580
}

#--- Steam: Idle Inhibit (Commented Out) ---
# Prevents screen from sleeping when Steam is fullscreen
windowrule {
name = steam-idle
match:class = ^(steam)$
idle_inhibit = fullscreen
}

# -----------------------------------------------------------------------------
# COMMON DESKTOP / GNOME / QT UTILITIES (calculator, viewers, managers)
# -----------------------------------------------------------------------------
# Rationale: These are desktop utilities where a floating, centered layout is
# the expected behavior for usability.

#--- Calculator ---
windowrule {
name = float-calculator
match:class = ^(org.gnome.Calculator)$
float = on
size = 360 616  # Compact vertical layout
center = on
}

#---  Gnome Camera ---
windowrule {
name = gnome-camera 
match:class = ^(org.gnome.Snapshot)$
float = on
size = 528 298
center = on
}

#--- Loupe (Image Viewer) ---
windowrule {
name = float-loupe
match:class = ^(org.gnome.Loupe)$
float = on
size = 900 600  # Wide enough for standard photos
center = on
}

#--- GNOME Clocks ---
windowrule {
name = float-clocks
match:class = ^(org.gnome.clocks)$
float = on
size = 602 297  # Compact landscape for World Clocks/Alarms
center = on
}

#--- Blueman Manager ---
windowrule {
name = float-blueman
match:class = ^(blueman-manager)$
float = on
size = 530 313 # Medium size for device lists
center = on
}

#--- Bluetui ---
windowrule {
name = bluetui
match:class = ^(bluetui)$
float = on
size = 551 362
center = on
}

#--- asusctl script ---
windowrule {
name = asusctl.sh
match:class = ^(asusctl.sh)$
float = on
size = 628 430
center = on
}

#--- Performance script ---
windowrule {
name = performance.sh
match:class = ^(performance.sh)$
float = on
size = 566 569
center = on
}

#--- Kokoro_GPU script ---
windowrule {
name = kokoro
match:class = ^(kokoro)$
float = on
pin = on
size = 254 90
move = (monitor_w-window_w-8) (monitor_h-window_h-8)
no_dim = on
opaque = on
}

#--- Peaclock-tui-time ---
windowrule {
name = peaclock
match:class = ^(peaclock)$
float = on
center = on
size = 859 383
}

#--- wifitui ---
windowrule {
name = wifitui_float
match:class = ^(wifitui)$
float = on
size = 511 323
center = on
}

# --- Tray-tui---
windowrule {
    name = tray-tui
    match:class = ^(tray-tui)$
    float = on
    size = 791 488
    center = on
}

# --- Cava Music visvualiser ---
windowrule {
    name = cava 
    match:class = ^(cava)$
    float = on
    size = 791 488
    center = on
}

# --- resouce monitor ---
windowrule {
    name = htop 
    match:class = ^(htop)$
    float = on
    size = 1080 607
    center = on
}


#--- nvim ---
windowrule {
name = nvim 
match:class = ^(nvim)$
float = on
size = 455 549
center = on
}

#--- erroands-gnome ---
windowrule {
name =  errands
match:title = ^(Errands)$
float = on
size = 519 614
center = on
}

#--- Thunar rename ---
windowrule {
    name = float_thunar_rename
    match:class = Thunar
    match:title = ^Rename.*$
    float = on
}

# --- System benchmarking script ---
windowrule {
    name = sysbench_benchmark.sh
    match:class = ^(sysbench_benchmark.sh)$
    float = on
    size = 567 658
    center = on
}

# --- POwer saving script ---
windowrule {
    name = power_saver.sh 
    match:class = ^(power_saver.sh)$
    float = on
    size = 621 524
    center = on
}

#--- timeout hypridle script---
windowrule {
    name = timeout.sh
    match:class = ^(timeout.sh)$
    float = on
    size = 390 458
    center = on
}

#--- Zathura (PDF Viewer) ---
windowrule {
name = float-zathura
match:class = ^(org.pwmt.zathura)$
float = on
size = 655 526 # Portrait ratio for reading documents
center = on
}

#--- Waypaper ---
windowrule {
name = float-waypaper
match:class = ^(waypaper)$
float = on
size = 786 492 # Large enough to preview wallpapers comfortably
center = on
}

#--- Hyprland Share Picker ---
windowrule {
name = float-share-picker
match:class = ^(hyprland-share-picker)$
float = on
size = 500 300  # Small dialog box
center = on
}

#--- NWG Look (GTK Theming) ---
windowrule {
name = float-nwg-look
match:class = ^(nwg-look)$
float = on
size = 627 464  # Standard window size for settings
center = on
}

#--- Kvantum Manager (Qt Theming) ---
windowrule {
name = float-kvantum
match:class = ^(kvantummanager)$
float = on
size = 585 512
center = on
}

#--- Qt6 Configuration Tool ---
windowrule {
name = float-qt6ct
match:class = ^(qt6ct)$
float = on
size = 700 609
center = on
}

#--- Qt5 Configuration Tool ---
windowrule {
name = float-qt5ct
match:class = ^(qt5ct)$
float = on
size = 636 665
center = on
}

#--- Guifetch ---
windowrule {
name = float-guifetch
match:class = ^(guifetch)$
float = on
size = 800 500
center = on
}

#--- Pavucontrol (Volume Control) ---
windowrule {
name = float-pavucontrol
match:class = ^(pavucontrol|org.pulseaudio.pavucontrol)$
float = on
size = 643 422
center = on
}

#--- Network Connection Editor ---
windowrule {
name = float-nm-editor
match:class = ^(nm-connection-editor)$
float = on
size = 45% 45%
center = on
}

# -----------------------------------------------------------------------------
# PICTURE-IN-PICTURE (PiP) & PINNED WINDOWS
# -----------------------------------------------------------------------------
# Purpose: Special handling for PiP-style windowsâ€”float, pin, size and place
# them in the bottom-right with no dimming, and ensure pinned windows have
# a consistent visual style (border, no dimming).

#--- Picture-in-Picture (PiP) ---
windowrule {
name = pip-global
match:title = ^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$

# 1. Set State
float = on
pin = on

# 2. Set Size FIRST (approx 360p)
# We set this first so the 'move' command knows how wide the window is.
size = 248 140

# 3. Move to Bottom-Right
# standard syntax: (screen_width - window_width - margin)
move = (monitor_w-window_w-20) (monitor_h-window_h-20)

# Visuals
no_dim = on
opaque = on
}

#--- Pinned Window Styling ---
# Applies automatically to ANY window that is pinned (on all workspaces).
windowrule {
name = style-pinned-windows
match:pin = on

# 1. Prevent Dimming (keep it bright)
no_dim = on

# 2. Visual Distinction (Green Border)
# Helps you instantly identify which window is pinned
border_color = rgb(328E6E)

# 3. Thicker Border
border_size = 5
}

# -----------------------------------------------------------------------------
# GLOBAL WINDOW BEHAVIORS
# -----------------------------------------------------------------------------
# Purpose: Global behavior rules that should apply broadly and consistently.

#--- Global: Persistent Size for Floating Windows ---
# Ensures floating windows remember their size when reopened.
windowrule {
name = global-persistent-size
match:float = on
persistent_size = on
}

#--- Global: Prevent Maximize Events ---
# Forces all apps to respect tiling/floating rules instead of maximizing.
windowrule {
name = global-suppress-maximize
match:class = .* 
suppress_event = maximize
}

# -----------------------------------------------------------------------------
# XWAYLAND / PHANTOM WINDOW FIXES
# -----------------------------------------------------------------------------
# Purpose: Workaround for invisible XWayland windows (tooltips/drag previews)
# that can erroneously take focus. This matches empty-class/title XWayland
# floating windows that are not fullscreen and not pinned, and prevents focus.
windowrule {
name = fix-xwayland-phantom
match:class = ^$
match:title = ^$
match:xwayland = on
match:float = on
match:fullscreen = off
match:pin = off
no_focus = on
}

# -----------------------------------------------------------------------------
# FULLSCREEN & VISUAL STYLING
# -----------------------------------------------------------------------------
# Purpose: Visual style tweaks for fullscreen windows and special workspaces.

#--- Fullscreen Window Customization ---
# Applies automatically whenever a window enters fullscreen mode.
windowrule {
name = style-fullscreen
match:fullscreen = on

# 1. Custom color Border
border_color = rgb(E2971F)

# 2. Force Border Size to 2 (Ensures border is visible in fullscreen)
border_size = 4

# 3. Remove Rounded Corners (Sharp edges for fullscreen)
rounding = 0
}

# -----------------------------------------------------------------------------
# COMMON DIALOGS / FILE PICKERS
# -----------------------------------------------------------------------------
# Rationale: Some apps use title-based dialogs while others use class-based
# portal windows. We keep both rules so title-based and class-based dialogs are
# handled reliably.

#--- Common Dialogs (Title Based) ---
# Floats windows based on their Title text.
windowrule {
name = float-dialogs-title

# Regex Logic:
# Matches specific phrases OR any title containing "dialog"
match:title = ^(Open|Open File|Select a File|Choose wallpaper|Open Folder|Save As|Library|File Upload|Authentication Required|Add Folder to Workspace|Choose Files|Confirm to replace files|File Operation Progress)(.*)$|^(.*dialog.*)$

float = on
center = on
size = 816 537
}

#--- Common Dialogs (Class Based) ---
# Floats windows based on their Class ID.
windowrule {
name = float-dialogs-class

# Matches FileRoller, XDG Portal (GTK), or any class containing "dialog"
match:class = ^(org.gnome.FileRoller|[Xx]dg-desktop-portal-gtk|.*dialog.*)$

float = on
center = on
size = 816 537

}

# -----------------------------------------------------------------------------
# SPECIAL WORKSPACES
# -----------------------------------------------------------------------------
# Purpose: Workspace-specific styling (gaps, border colors). The workspace line
# sets layout/gap defaults while windowrules target windows in those workspaces.

#--- Special Workspace: Magic ---
# Sets specific borders and gaps for the special workspace "magic"
workspace = special:magic, gapsout:30, gapsin:6

#--- Special Workspace: Magic Styling ---
# NOTE: Border color must be set via windowrule, not the workspace line.
windowrule {
name = style-magic-workspace
match:workspace = special:magic
border_color = rgb(CBA6F7)
border_size = 9
}

# -----------------------------------------------------------------------------
# SMART GAPS (Disabled / Examples)
# -----------------------------------------------------------------------------
# These blocks are retained from your config as commented examples. They show
# the approach for dynamic gaps/border removal when there is only one tiled
# window or when a workspace is in a maximized layout state. Uncomment and
# adapt if/when you want to enable smart gaps for specific workspaces/layouts.

#------------------------------------------------------------------------------
# SMART GAPS (No Gaps/Borders when only one window is visible)
#------------------------------------------------------------------------------

#--- 1. Behavior for Single Tiled Window (w[tv1]) ---
# A. Workspace Rule: Remove gaps when only 1 tiled window is visible
# workspace = w[tv1], gapsout:0, gapsin:0

# B. Window Rule: Remove border & rounding for windows on that workspace
# windowrule {
# name = smart-gaps-single
# match:workspace = w[tv1]
# match:float = off
# 
# border_size = 0
# rounding = 0
# }

# --- 2. Behavior for Maximized Layout State (f[1]) ---

# A. Workspace Rule: Remove gaps when workspace is maximized
# workspace = f[1], gapsout:0, gapsin:0

# B. Window Rule: Remove border & rounding for windows on maximized workspace
# windowrule {
# name = smart-gaps-maximized
# match:workspace = f[1]
# match:float = off
# 
# border_size = 0
# rounding = 0
# }

# -----------------------------------------------------------------------------
# MISCELLANEOUS / STARTUP & EXAMPLES
# -----------------------------------------------------------------------------

#--- background apps open in the foreground when fullscreened
misc {
    
    # 0 - New window is behind (default)
    # 1 - New window takes over (can be buggy with maximizing)
    # 2 - New window unfullscreens the current window and takes focus
    new_window_takes_over_fullscreen = 2

}


# --- Example Window Rule (Converted to Block Syntax) ---
# Kept as an explicit example in the backup. Useful as a template for new rules.
# windowrule {
# name = example-kitty-float
# match:class = ^(kitty)$
# match:title = ^(kitty)$
# float = on
# size = 1135 634
# center = on
# }

# =============================================================================
# END OF FILE
# =============================================================================
